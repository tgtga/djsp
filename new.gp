f(n) = { \\ 0 -> 1, 0 -> 1
  my(s = sqrtint(n)); \\ 0 -> .5, 1 -> 1.5

  my(t = sqr(s)); \\ 0 -> 1, 1.5 -> 2.5
  t = -t;
  t += n; \\ 1 -> 0.5, 2.5 -> 2

  t *= n; \\ 0.5 -> 1.5, 2 -> 3.5

  my(d = 2 * s + 1); \\ 0 -> 0.5, 3.5 -> 4
  t \= d; \\ 1.5 -> 1, 4 -> 3.5
  kill(d); \\ 0.5 -> 0, 3.5 -> 3

  n *= s; \\ 1 -> 1.5, 3 -> 3.5
  kill(s); \\ 0.5 -> 0, 3.5 -> 3

  n + t;
};

print(apply(n -> sqrtint(n^3), [1..100]));
print(apply(f, [1..100]));
